<html>
    <script>
        function query() {
            let query = document.getElementById("search").value;
            document.getElementById("results").innerHTML = "";

            fetch(`http://localhost:42069/q=${query}`).then(response => response.json())
                .then(data => {
                    console.log(data);
                    let ul = document.createElement('ul');
                    document.getElementById("results").appendChild(ul);

                    data.forEach(element => {
                        let listItem = document.createElement("li");
                        ul.appendChild(listItem);

                        let link = document.createElement("a");
                        let desc = document.createElement("p");

                        link.setAttribute("href", element.url);

                        link.text = element.url
                        desc.innerHTML = element.snippet + " " + element.rank.toFixed(4);
                        
                        listItem.appendChild(link);
                        listItem.appendChild(desc);
                    })
                })
        }
    </script>
    <head>
        <title>ApeSearch</title>
    </head>
    <body>
        <h1>ApeSearch</h1>
        <div>
            <input id="search">
        </div>
        <div>
            <button onclick="query()">Search</button>
            <button>I'm feeling lucky</button>
        </div>
        <div id="results"></div>
    </body>
</html>
